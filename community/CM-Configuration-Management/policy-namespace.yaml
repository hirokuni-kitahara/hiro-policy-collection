apiVersion: policy.open-cluster-management.io/v1
kind: Policy
metadata:
  name: policy-namespace
  annotations:
    policy.open-cluster-management.io/standards: NIST SP 800-53
    policy.open-cluster-management.io/categories: CM Configuration Management
    policy.open-cluster-management.io/controls: CM-5 Access Restrictions for Change
    integrityshield.io/message: H4sIAKX4QWAAA5WUzW7bMAyA734KIueq6zAUGHzL0mHroUWRBLsMOygy42iVJUGSjQXD3n2UbCVOk6YpT7bE348iuZU/0HlpdAnWKCm218aiZkK1PqBjDde8xgZ1uJbmQ/exeJa6KuEpqRYNBl7xwMsCQPMGsw8Wf7zlAumCa20CDxTCRz24II4PXFfcVb6Ex/vFEhZP8Pnmht1+utBe8IC1cRLJwewBZkavZd26lAQ87FQv9WZ0cEYlX+wWpkKg9zBHH5wUqS5YGwezDdc1Ft6iiHU6sq9kCjlNWiWgJr3EpJKerxQSyTVXPp4M4AI2VlH2AyoGZvUbRbjDtdQyeUnnUfh7W5cN+xYeQBn6mTXGfc1y0F9KMBw0uZdce5azDHZG2KGTYVvCd1lvRhd96S+RZGEgDF1IrgUut5Zya6juDe/wQA3OEDwE8nhUzinSI47naJ2h5gvGWPHu7g2DpyjBePqFfqWuT4zgqr9hR6Nos+0c16OJzafHBpnMLui8VWmirfzmTGtL+rL+TN6FbxP81Dr2+orYBdo/w32MN+kc8XwjqxM0U2EnttnrbPJTHyLQNFVytOMY0A4LLe2MydK1OBmeRkgPtd9A1eyF6bTjUsW1sHe7QEX4jOudNjyIzdc/1tH+2YeKwf4+4zbOVied0THhK6D6abbJFO71FXRctXEb/pxU2E1+/Sv+A6FPQl75BQAA
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSFBCQUFCQ0FBNUZpRUVWSlRXK3hrWFZWcUdrSlRYZXJVUms4em81N0VGQW1CQitLVWJIR2hwY205cmRXNXAKTG10cGRHRm9ZWEpoTVVCcFltMHVZMjl0QUFvSkVIcTFFWlBNNk9leGhxSU1BS1ljSndzREMvQ1BidXRVeGJTQwpzbDdRUFpEM2cvUXNwWW9pdHpXbDV2RVpNRjhaTFlVQXJyNWt3Y0NiUXdsczBSL1dFYnFGbEN5NEtrcHp3QnVPCnNwS2gySWNXVmtTSXVMbGFuNjVKMUJSRzl6eEFUOEt0Tk5KWVJmK203Zno3TmR6VnFyYk5Uc1E0UnpwQUdPc24KUzYxbDdCOEpaZFVtaHBOWEZEWiswU1FIbWNGaDdsZU1IUVA5UHBhR0xqTCtTSTR4blNMVFAvYkNieEtnd0JFeAp4TTZ5aVNDRkttU0NMTlFSNDIzb0twSHdUdE1yOC82NGt4eGxtQjdOeGZVT3R3TjZiUUMxZm9qSDdXUWRDc2E5CkFEMklEWlhLd0hsNkUwTmpTY0pNbWlHb3B3NDhZcWxKakFJTUw1cU55bnM5NkhncU4rSTQ3bXhwWU5ydWIyQVgKdndmNFdvRUVOLzdOaCtZVE9TR2NoWnU3R0VZclRQQTY3ZDF3T3phZHNGdFM0RDlEYVZFOGo5aUNYY3M3ZmxTcgpVYm5NcXBoRSszVlo0a0l6R0dBQjhEU1k5dFo1WCtMUStrWEdIakNJenJEZ0NhR1h3Y3F4cXR6cFB4QjlYY053ClU4ZG44cmduWTdwQ3F4RThRcXR2NjdDSW01ZUVqL0xxVStUZmRVWFJBSDZ0cFE9PQo9WEhDZQotLS0tLUVORCBQR1AgU0lHTkFUVVJFLS0tLS0K
spec:
  remediationAction: enforce
  disabled: false
  policy-templates:
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-test-namespace
        spec:
          remediationAction: enforce
          severity: High
          object-templates:
            - complianceType: musthave
              objectDefinition:
                kind: Namespace
                apiVersion: v1
                metadata:
                  name: policy-test-ns
---
apiVersion: policy.open-cluster-management.io/v1
kind: PlacementBinding
metadata:
  name: binding-policy-namespace
  annotations:
    integrityshield.io/message: H4sIAKX4QWAAA5WUzW7bMAyA734KIueq6zAUGHzL0mHroUWRBLsMOygy42iVJUGSjQXD3n2UbCVOk6YpT7bE348iuZU/0HlpdAnWKCm218aiZkK1PqBjDde8xgZ1uJbmQ/exeJa6KuEpqRYNBl7xwMsCQPMGsw8Wf7zlAumCa20CDxTCRz24II4PXFfcVb6Ex/vFEhZP8Pnmht1+utBe8IC1cRLJwewBZkavZd26lAQ87FQv9WZ0cEYlX+wWpkKg9zBHH5wUqS5YGwezDdc1Ft6iiHU6sq9kCjlNWiWgJr3EpJKerxQSyTVXPp4M4AI2VlH2AyoGZvUbRbjDtdQyeUnnUfh7W5cN+xYeQBn6mTXGfc1y0F9KMBw0uZdce5azDHZG2KGTYVvCd1lvRhd96S+RZGEgDF1IrgUut5Zya6juDe/wQA3OEDwE8nhUzinSI47naJ2h5gvGWPHu7g2DpyjBePqFfqWuT4zgqr9hR6Nos+0c16OJzafHBpnMLui8VWmirfzmTGtL+rL+TN6FbxP81Dr2+orYBdo/w32MN+kc8XwjqxM0U2EnttnrbPJTHyLQNFVytOMY0A4LLe2MydK1OBmeRkgPtd9A1eyF6bTjUsW1sHe7QEX4jOudNjyIzdc/1tH+2YeKwf4+4zbOVied0THhK6D6abbJFO71FXRctXEb/pxU2E1+/Sv+A6FPQl75BQAA
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSFBCQUFCQ0FBNUZpRUVWSlRXK3hrWFZWcUdrSlRYZXJVUms4em81N0VGQW1CQitLVWJIR2hwY205cmRXNXAKTG10cGRHRm9ZWEpoTVVCcFltMHVZMjl0QUFvSkVIcTFFWlBNNk9leGhxSU1BS1ljSndzREMvQ1BidXRVeGJTQwpzbDdRUFpEM2cvUXNwWW9pdHpXbDV2RVpNRjhaTFlVQXJyNWt3Y0NiUXdsczBSL1dFYnFGbEN5NEtrcHp3QnVPCnNwS2gySWNXVmtTSXVMbGFuNjVKMUJSRzl6eEFUOEt0Tk5KWVJmK203Zno3TmR6VnFyYk5Uc1E0UnpwQUdPc24KUzYxbDdCOEpaZFVtaHBOWEZEWiswU1FIbWNGaDdsZU1IUVA5UHBhR0xqTCtTSTR4blNMVFAvYkNieEtnd0JFeAp4TTZ5aVNDRkttU0NMTlFSNDIzb0twSHdUdE1yOC82NGt4eGxtQjdOeGZVT3R3TjZiUUMxZm9qSDdXUWRDc2E5CkFEMklEWlhLd0hsNkUwTmpTY0pNbWlHb3B3NDhZcWxKakFJTUw1cU55bnM5NkhncU4rSTQ3bXhwWU5ydWIyQVgKdndmNFdvRUVOLzdOaCtZVE9TR2NoWnU3R0VZclRQQTY3ZDF3T3phZHNGdFM0RDlEYVZFOGo5aUNYY3M3ZmxTcgpVYm5NcXBoRSszVlo0a0l6R0dBQjhEU1k5dFo1WCtMUStrWEdIakNJenJEZ0NhR1h3Y3F4cXR6cFB4QjlYY053ClU4ZG44cmduWTdwQ3F4RThRcXR2NjdDSW01ZUVqL0xxVStUZmRVWFJBSDZ0cFE9PQo9WEhDZQotLS0tLUVORCBQR1AgU0lHTkFUVVJFLS0tLS0K
placementRef:
  name: placement-policy-namespace
  kind: PlacementRule
  apiGroup: apps.open-cluster-management.io
subjects:
  - name: policy-namespace
    kind: Policy
    apiGroup: policy.open-cluster-management.io
---
apiVersion: apps.open-cluster-management.io/v1
kind: PlacementRule
metadata:
  name: placement-policy-namespace
  annotations:
    integrityshield.io/message: H4sIAKX4QWAAA5WUzW7bMAyA734KIueq6zAUGHzL0mHroUWRBLsMOygy42iVJUGSjQXD3n2UbCVOk6YpT7bE348iuZU/0HlpdAnWKCm218aiZkK1PqBjDde8xgZ1uJbmQ/exeJa6KuEpqRYNBl7xwMsCQPMGsw8Wf7zlAumCa20CDxTCRz24II4PXFfcVb6Ex/vFEhZP8Pnmht1+utBe8IC1cRLJwewBZkavZd26lAQ87FQv9WZ0cEYlX+wWpkKg9zBHH5wUqS5YGwezDdc1Ft6iiHU6sq9kCjlNWiWgJr3EpJKerxQSyTVXPp4M4AI2VlH2AyoGZvUbRbjDtdQyeUnnUfh7W5cN+xYeQBn6mTXGfc1y0F9KMBw0uZdce5azDHZG2KGTYVvCd1lvRhd96S+RZGEgDF1IrgUut5Zya6juDe/wQA3OEDwE8nhUzinSI47naJ2h5gvGWPHu7g2DpyjBePqFfqWuT4zgqr9hR6Nos+0c16OJzafHBpnMLui8VWmirfzmTGtL+rL+TN6FbxP81Dr2+orYBdo/w32MN+kc8XwjqxM0U2EnttnrbPJTHyLQNFVytOMY0A4LLe2MydK1OBmeRkgPtd9A1eyF6bTjUsW1sHe7QEX4jOudNjyIzdc/1tH+2YeKwf4+4zbOVied0THhK6D6abbJFO71FXRctXEb/pxU2E1+/Sv+A6FPQl75BQAA
    integrityshield.io/signature: LS0tLS1CRUdJTiBQR1AgU0lHTkFUVVJFLS0tLS0KCmlRSFBCQUFCQ0FBNUZpRUVWSlRXK3hrWFZWcUdrSlRYZXJVUms4em81N0VGQW1CQitLVWJIR2hwY205cmRXNXAKTG10cGRHRm9ZWEpoTVVCcFltMHVZMjl0QUFvSkVIcTFFWlBNNk9leGhxSU1BS1ljSndzREMvQ1BidXRVeGJTQwpzbDdRUFpEM2cvUXNwWW9pdHpXbDV2RVpNRjhaTFlVQXJyNWt3Y0NiUXdsczBSL1dFYnFGbEN5NEtrcHp3QnVPCnNwS2gySWNXVmtTSXVMbGFuNjVKMUJSRzl6eEFUOEt0Tk5KWVJmK203Zno3TmR6VnFyYk5Uc1E0UnpwQUdPc24KUzYxbDdCOEpaZFVtaHBOWEZEWiswU1FIbWNGaDdsZU1IUVA5UHBhR0xqTCtTSTR4blNMVFAvYkNieEtnd0JFeAp4TTZ5aVNDRkttU0NMTlFSNDIzb0twSHdUdE1yOC82NGt4eGxtQjdOeGZVT3R3TjZiUUMxZm9qSDdXUWRDc2E5CkFEMklEWlhLd0hsNkUwTmpTY0pNbWlHb3B3NDhZcWxKakFJTUw1cU55bnM5NkhncU4rSTQ3bXhwWU5ydWIyQVgKdndmNFdvRUVOLzdOaCtZVE9TR2NoWnU3R0VZclRQQTY3ZDF3T3phZHNGdFM0RDlEYVZFOGo5aUNYY3M3ZmxTcgpVYm5NcXBoRSszVlo0a0l6R0dBQjhEU1k5dFo1WCtMUStrWEdIakNJenJEZ0NhR1h3Y3F4cXR6cFB4QjlYY053ClU4ZG44cmduWTdwQ3F4RThRcXR2NjdDSW01ZUVqL0xxVStUZmRVWFJBSDZ0cFE9PQo9WEhDZQotLS0tLUVORCBQR1AgU0lHTkFUVVJFLS0tLS0K
spec:
  clusterConditions:
    - status: "True"
      type: ManagedClusterConditionAvailable
  clusterSelector:
    matchExpressions:
      - {key: environment, operator: In, values: ["dev"]}
